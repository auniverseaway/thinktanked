<html>
<head>
    <style>
    #word {
        font-family: Helvetica, sans-serif;
        font-size: calc(min(30vh, 30vw));
        margin: auto;
        text-align: center;
        box-sizing: border-box;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    html, body {
        overscroll-behavior-y: none;
    }
    </style>
</head>
<body>
    <p id="word"></p>
    <p id="hints"></p>
    <script>
        function color(body, x, y) {
            const r = 255;
            const g = (x / window.innerWidth)*255;
            const b = (y / window.innerHeight)*255;
            body.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
            const $word = document.getElementById('word');
            $word.style.color = `rgb(${255-r}, ${255-g}, ${255-b})`;
        }

        function pickWord( x = Math.random()*window.innerWidth) {
            const collections = { 
            all: [     
                'a', 'me', 'the',
                'I', 'like', 'my', 
                'at','look', 'see',
                'here', 'is', 'this',
                'an', 'in', 'it',
                'and', 'dad', 'house',
                'mom', 'park', 'can',
                'do', 'to', 'be',
                'we', 'got', 'was',
                'went', 'she', 'he',
                'boy', 'cat', 'dog' 
            ],
            first: [
                'a', 'me', 
                'I', 'my', 
                'dad', 'house',
                'mom', 'park',
                'boy', 'cat', 'dog', 
            ],
            is: [
                'I', 'in', 'is', 'it',
            ]
            };

            const collection  = new URLSearchParams(window.location.search).get('collection');
            const words = collections[collection ? collection : 'first'];
            const $word = document.getElementById('word');
            $word.textContent = words[Math.floor(x/window.innerWidth * words.length)];
            const $hints = document.getElementById('hints');
            $hints.textContent = '';
        }

        function displayHints() {
            const hints = {
                I: 'eye',
                i: 'igloo',
                s: 'snake',
                t: 'tree',
                n: 'nest',
            }
            const $hints = document.getElementById('hints');
            $hints.textContent = '';
            const word = document.getElementById('word').textContent;
            letters = word.split('');
            letters.forEach((letter) => {
                console.log(letter);
                const hint = hints[letter];
                console.log(hint);
                if (hint) {
                    $hints.innerHTML = $hints.innerHTML + `<img src="hints/${hint}.png">`;
                }
            })
        }

    
        let scrubbing = false;
        const $word = document.getElementById('word');

        const body = document.body;
        document.addEventListener('click', (e) => {
            displayHints();
        });

        document.addEventListener('keypress', (e) => {
            pickWord();
        });
        
        document.addEventListener('mousemove', (e) => {
            color(body, e.offsetX, e.offsetY);
            pickWord(e.clientX);
        });

        document.addEventListener('touchmove', (e) => {
            const touch = e.touches.item(0);
            color(body, touch.screenX, touch.screenY);
            pickWord(touch.screenX);
        });
    </script>
</body>
</html>